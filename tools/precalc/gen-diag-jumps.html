<!doctype html>
<html>
<head>
<meta charset="UTF-8">		  
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quoridor - Generate Jumps</title>
<link rel="shortcut icon" href="../../img/favicon.ico" />	

<script src="../../js/core/board.js"></script>
<body>
<script>
const EOL = '<br/>';
var board = new Board();



var output = '';
var jumps;
for (var p = 0; p < FLOOR_SPACES; p++) {
	var r = Math.floor(p/FLOOR_SIZE);
	var c = p % FLOOR_SIZE;
		
	output += '[';
	if (canJump(r, c, r+1, c-1)) { 
		jumps = [];
		pushJump(r+1, c);
		pushJump(r, c-1); 
		output += '[';
		for (var j = 0; j < jumps.length; j++) {
			output += jumps[j] + ',';
		}
		output += '],';
	}
	
	if (canJump(r, c, r-1, c+1)) { 
		jumps = [];
		pushJump(r-1, c); 
		pushJump(r, c+1); 
		output += '[';
		for (var j = 0; j < jumps.length; j++) {
			output += jumps[j] + ',';
		}
		output += '],';
	}
	
	if (canJump(r, c, r+1, c+1)) { 
		jumps = [];
		pushJump(r, c+1); 
		pushJump(r+1, c);
		output += '[';
		for (var j = 0; j < jumps.length; j++) {
			output += jumps[j] + ',';
		}	
		output += '],';		
	}
	
	if (canJump(r, c, r-1, c-1)) {
		jumps = [];
		pushJump(r, c-1); 
		pushJump(r-1, c); 
		output += '[';
		for (var j = 0; j < jumps.length; j++) {
			output += jumps[j] + ',';
		}
		output += '],';
	}
		
		
	output += '], //' + p + EOL;
	//output += '],';

}

//document.write('<pre>');
document.write('const DIAG_JUMP_OPPS_BY_POS = [' + EOL);
//document.write('const DIAG_JUMP_DESTS_BY_POS = [' + EOL);

document.write(output.replace(/,\]/g, ']')); //Remove Trailing comma
document.write('];' + EOL);
//document.write('</pre>');

function pushJump(r, c) {
	if (board.onBoard(r, c)) {
		jumps.push((r*FLOOR_SIZE)+c);
	}
}

function canJump(sr, sc, dr, dc) {
	
	var deltaR = Math.abs(sr-dr);
	var deltaC = Math.abs(sc-dc);
	if (board.onBoard(dr, dc)) return true;
	else return false;
		
}

function sortNumber(a,b) {
	return a - b;
}
</script>
</body>
</html>
